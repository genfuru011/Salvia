<div class="flex h-screen bg-gray-50 font-sans">
  <%= render partial: "shared/sidebar" %>

  <main class="flex-1 overflow-y-auto">
    <%= render partial: "shared/header", locals: { title: "Projects" } %>

    <div class="p-8">
      <div class="mb-6 flex items-center justify-between">
        <h2 class="text-xl font-semibold text-gray-800">Active Projects</h2>
        <button class="rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700">
          New Project
        </button>
      </div>

      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        <% @projects.each do |project| %>
          <div class="rounded-[7px] border border-gray-100 bg-white p-6 shadow-sm transition hover:shadow-md">
            <div class="mb-4 flex items-start justify-between">
              <div>
                <h3 class="font-semibold text-gray-900"><%= project.name %></h3>
                <p class="text-sm text-gray-500">Due <%= project.due_date %></p>
              </div>
              <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium <%= project.status_color_class %>">
                <%= project.health_status %>
              </span>
            </div>

            <div class="mb-4">
              <div class="mb-1 flex justify-between text-sm">
                <span class="text-gray-500">Budget Usage</span>
                <span class="font-medium text-gray-900"><%= project.budget_usage_percentage %>%</span>
              </div>
              <div class="h-2 w-full overflow-hidden rounded-full bg-gray-100">
                <div class="h-full rounded-full <%= project.health_status == 'Critical' ? 'bg-red-500' : (project.health_status == 'At Risk' ? 'bg-yellow-500' : 'bg-blue-500') %>" style="width: <%= [project.budget_usage_percentage, 100].min %>%"></div>
              </div>
            </div>

            <div class="flex items-center justify-between border-t border-gray-50 pt-4 text-sm">
              <div>
                <p class="text-gray-500">Spent</p>
                <p class="font-medium text-gray-900">$<%= project.spent.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\\1,').reverse %></p>
              </div>
              <div class="text-right">
                <p class="text-gray-500">Budget</p>
                <p class="font-medium text-gray-900">$<%= project.budget.to_s.reverse.gsub(/(\d{3})(?=\d)/, '\\1,').reverse %></p>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </main>
</div>
